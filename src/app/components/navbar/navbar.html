<header class="header">
  <div class="header-container">
    <!-- Logo -->
    <div class="logo">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 48 48"><defs><mask id="SVGgXaznekf"><g fill="none"><path fill="#fff" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 17h38l-4.2 26H9.2z"/><path stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M35 17c0-6.627-4.925-12-11-12s-11 5.373-11 12"/><circle cx="17" cy="26" r="2" fill="#000"/><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M18 33s2 3 6 3s6-3 6-3"/><circle cx="31" cy="26" r="2" fill="#000"/></g></mask></defs><path fill="currentColor" d="M0 0h48v48H0z" mask="url(#SVGgXaznekf)"/></svg>
      <span>ShopHub</span>
    </div>

    <!-- Desktop Navigation -->
    <nav class="nav-desktop">
      @for(category of mainCategories; track category.id){
      <div class="nav-item" (mouseenter)="toggleMenu(category.categoryName)">

        <button class="nav-link">{{category.categoryName}}</button>

        <div class="mega-menu" (mouseleave)="activeMenu = null">
          @for(item of preparedTree; track item.id){
          <div class="mega-menu-column" *ngIf="item?.children.length>0">
            <h4>{{item.categoryName}}</h4>
            <ul>
              @for(subItem of item?.children; track subItem.id){
              <li><a [routerLink]="['/category', item.urlKey]">{{subItem.categoryName}}</a></li>
              }
            </ul>
          </div>
          }

        </div>
      </div>
      }

    </nav>

    <!-- Search Bar -->
    <div class="search-bar">
      <input type="text" placeholder="Search products...">
      <button class="search-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M11.5 2.75a8.75 8.75 0 1 0 0 17.5a8.75 8.75 0 0 0 0-17.5M1.25 11.5c0-5.66 4.59-10.25 10.25-10.25S21.75 5.84 21.75 11.5c0 2.56-.939 4.902-2.491 6.698l3.271 3.272a.75.75 0 1 1-1.06 1.06l-3.272-3.271A10.2 10.2 0 0 1 11.5 21.75c-5.66 0-10.25-4.59-10.25-10.25" clip-rule="evenodd"/></svg>
      </button>
    </div>

    <!-- Right Icons -->
    <div class="header-icons">
      <button class="icon-btn" title="Account">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"><path d="M8.25 9a3.75 3.75 0 1 1 7.5 0a3.75 3.75 0 0 1-7.5 0M12 6.75a2.25 2.25 0 1 0 0 4.5a2.25 2.25 0 0 0 0-4.5"/><path d="M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12S17.937 22.75 12 22.75S1.25 17.937 1.25 12M12 2.75a9.25 9.25 0 0 0-6.558 15.773c.18-.973.535-1.89 1.246-2.628C7.753 14.791 9.454 14.25 12 14.25s4.247.541 5.311 1.645c.712.738 1.066 1.656 1.247 2.629A9.25 9.25 0 0 0 12 2.75m5.194 16.905c-.102-1.212-.365-2.1-.962-2.719c-.65-.673-1.853-1.186-4.232-1.186s-3.582.513-4.232 1.186c-.597.62-.86 1.507-.962 2.72A9.2 9.2 0 0 0 12 21.25a9.2 9.2 0 0 0 5.194-1.595"/></g></svg>
      </button>
      <button class="icon-btn" title="Wishlist">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="m8.962 18.91l.464-.588zM12 5.5l-.54.52l.01.011zm3.038 13.41l.465.59zM13.47 8.03a.75.75 0 1 0 1.06-1.06zM9.426 18.322C7.91 17.127 6.253 15.96 4.938 14.48C3.65 13.028 2.75 11.335 2.75 9.137h-1.5c0 2.666 1.11 4.7 2.567 6.339c1.43 1.61 3.254 2.9 4.68 4.024zM2.75 9.137c0-2.15 1.215-3.954 2.874-4.713c1.612-.737 3.778-.541 5.836 1.597l1.08-1.04C10.1 2.444 7.264 2.025 5 3.06C2.786 4.073 1.25 6.425 1.25 9.137zM8.497 19.5c.513.404 1.063.834 1.62 1.16s1.193.59 1.883.59v-1.5c-.31 0-.674-.12-1.126-.385c-.453-.264-.922-.628-1.448-1.043zm7.006 0c1.426-1.125 3.25-2.413 4.68-4.024c1.457-1.64 2.567-3.673 2.567-6.339h-1.5c0 2.198-.9 3.891-2.188 5.343c-1.315 1.48-2.972 2.647-4.488 3.842zM22.75 9.137c0-2.712-1.535-5.064-3.75-6.077c-2.264-1.035-5.098-.616-7.54 1.92l1.08 1.04c2.058-2.137 4.224-2.333 5.836-1.596c1.659.759 2.874 2.562 2.874 4.713zm-8.176 9.185c-.526.415-.995.779-1.448 1.043s-.816.385-1.126.385v1.5c.69 0 1.326-.265 1.883-.59c.558-.326 1.107-.756 1.62-1.16zM11.47 6.032l2 1.998l1.06-1.06l-2-2z"/></svg>
      </button>
      <button class="icon-btn" title="Cart">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M2.237 2.288a.75.75 0 1 0-.474 1.424l.265.088c.676.225 1.124.376 1.453.529c.312.145.447.262.533.382s.155.284.194.626c.041.361.042.833.042 1.546v2.672c0 1.367 0 2.47.117 3.337c.12.9.38 1.658.982 2.26c.601.602 1.36.86 2.26.982c.866.116 1.969.116 3.336.116H19a.75.75 0 0 0 0-1.5h-8c-1.435 0-2.436-.002-3.192-.103c-.733-.099-1.122-.28-1.399-.556a1.5 1.5 0 0 1-.255-.341h9.905c.448 0 .842 0 1.17-.035c.354-.039.698-.124 1.02-.337c.324-.213.537-.495.712-.806c.161-.286.317-.649.493-1.061l.467-1.09c.385-.896.706-1.647.867-2.257c.168-.637.212-1.302-.184-1.903c-.396-.6-1.025-.822-1.676-.919c-.625-.092-1.441-.092-2.417-.092H5.707l-.009-.083c-.055-.485-.176-.93-.467-1.333c-.291-.404-.675-.66-1.117-.865c-.417-.194-.946-.37-1.572-.58zM5.75 6.75V9.5c0 1.172.001 2.054.057 2.75h10.215c.496 0 .809-.001 1.046-.027c.219-.023.303-.062.356-.097s.122-.097.23-.289c.117-.208.24-.495.436-.95l.429-1c.414-.968.69-1.616.819-2.106c.126-.476.062-.62.014-.694c-.049-.073-.157-.189-.644-.26c-.501-.075-1.205-.077-2.257-.077zm-.5 12.75a2.25 2.25 0 1 0 4.5 0a2.25 2.25 0 0 0-4.5 0m2.25.75a.75.75 0 1 1 0-1.5a.75.75 0 0 1 0 1.5m9 1.5a2.25 2.25 0 1 1 0-4.5a2.25 2.25 0 0 1 0 4.5m-.75-2.25a.75.75 0 1 0 1.5 0a.75.75 0 0 0-1.5 0" clip-rule="evenodd"/></svg>
      </button>
      <button class="mobile-menu-btn" (click)="toggleMobileMenu()">
        {{ isMobileMenuOpen ? '✕' : '☰' }}
      </button>
    </div>
  </div>

  <!-- Mobile Navigation Menu -->
  <nav class="nav-mobile" *ngIf="isMobileMenuOpen">

    @for(category of mainCategories; track category.id){
      <div class="mobile-nav-item" (click)="toggleMenu(category.categoryName)">
        <button class="mobile-nav-link">{{category.categoryName}}</button>
        <div class="mobile-submenu" *ngIf="activeMenu === category.categoryName">
          @for(item of preparedTree; track item.id){
            <a href="#">{{item.categoryName}}</a>
          }
        </div>
      </div>
    }
    
  </nav>
</header>